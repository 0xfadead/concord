/*****************************************************************************
 * Permissions Datatypes
 * **************************************************************************/

DESC("Allows creation of instant invites")
DIRECTIVE(define DISCORD_PERM_CREATE_INSTANT_INVITE 1 << 0)
DESC("Allows kicking members")
DIRECTIVE(define DISCORD_PERM_KICK_MEMBERS 1 << 1)
DESC("Allows banning members")
DIRECTIVE(define DISCORD_PERM_BAN_MEMBERS 1 << 2)
DESC("Allows all permissions and bypasses channel permission overwrites")
DIRECTIVE(define DISCORD_PERM_ADMINISTRATOR 1 << 3)
DESC("Allows management and editing of channels")
DIRECTIVE(define DISCORD_PERM_MANAGE_CHANNELS 1 << 4)
DESC("Allows management and editing of the guild")
DIRECTIVE(define DISCORD_PERM_MANAGE_GUILD 1 << 5)
DESC("Allows for the addition of reactions to messages")
DIRECTIVE(define DISCORD_PERM_ADD_REACTIONS 1 << 6)
DESC("Allows for viewing of audit logs")
DIRECTIVE(define DISCORD_PERM_VIEW_AUDIT_LOG 1 << 7)
DESC("Allows for using priority speaker in a voice channel")
DIRECTIVE(define DISCORD_PERM_PRIORITY_SPEAKER 1 << 8)
DESC("Allows the user to go live")
DIRECTIVE(define DISCORD_PERM_STREAM 1 << 9)
DESC("Allows guild members to view a channel, which includes reading messages"
     "in text channels and joining voice channels")
DIRECTIVE(define DISCORD_PERM_VIEW_CHANNEL 1 << 10)
DESC("Allows for sending messages in a channel (does not allow sending messages"
     "in threads)")
DIRECTIVE(define DISCORD_PERM_SEND_MESSAGES 1 << 11)
DESC("Allows for sending of `/tts` messages")
DIRECTIVE(define DISCORD_PERM_SEND_TTS_MESSAGES 1 << 12)
DESC("Allows for deletion of other users messages")
DIRECTIVE(define DISCORD_PERM_MANAGE_MESSAGES 1 << 13)
DESC("Links sent by users with this permission will be auto-embedded")
DIRECTIVE(define DISCORD_PERM_EMBED_LINKS 1 << 14)
DESC("Allows for uploading images and files")
DIRECTIVE(define DISCORD_PERM_ATTACH_FILES 1 << 15)
DESC("Allows for reading of message history")
DIRECTIVE(define DISCORD_PERM_READ_MESSAGE_HISTORY 1 << 16)
DESC("Allows for using the `@everyone` tag to notify all users in a channel,"
     "and the `@here` tag to notify all online users in a channel")
DIRECTIVE(define DISCORD_PERM_MENTION_EVERYONE 1 << 17)
DESC("Allows the usage of custom emojis from other servers")
DIRECTIVE(define DISCORD_PERM_USE_EXTERNAL_EMOJIS 1 << 18)
DESC("Allows for viewing guild insights")
DIRECTIVE(define DISCORD_PERM_VIEW_GUILD_INSIGHTS 1 << 19)
DESC("Allows for joining of a voice channel")
DIRECTIVE(define DISCORD_PERM_CONNECT 1 << 20)
DESC("Allows for speaking in a voice channel")
DIRECTIVE(define DISCORD_PERM_SPEAK 1 << 21)
DESC("Allows for muting members in a voice channel")
DIRECTIVE(define DISCORD_PERM_MUTE_MEMBERS 1 << 22)
DESC("Allows for deafening of members in a voice channel")
DIRECTIVE(define DISCORD_PERM_DEAFEN_MEMBERS 1 << 23)
DESC("Allows for moving of members between voice channels")
DIRECTIVE(define DISCORD_PERM_MOVE_MEMBERS 1 << 24)
DESC("Allows for using voice-activity-detection in a voice channel")
DIRECTIVE(define DISCORD_PERM_USE_VAD 1 << 25)
DESC("Allows for modification of own nickname")
DIRECTIVE(define DISCORD_PERM_CHANGE_NICKNAME 1 << 26)
DESC("Allows for modification of other users nicknames")
DIRECTIVE(define DISCORD_PERM_MANAGE_NICKNAMES 1 << 27)
DESC("Allows management and editing of roles")
DIRECTIVE(define DISCORD_PERM_MANAGE_ROLES 1 << 28)
DESC("Allows management and editing of webhooks")
DIRECTIVE(define DISCORD_PERM_MANAGE_WEBHOOKS 1 << 29)
DESC("Allows management and editing of emojis and stickers")
DIRECTIVE(define DISCORD_PERM_MANAGE_EMOJIS_AND_STICKERS 1 << 30)
DESC("Allows members to use application commands, including slash commands and"
     "context menu commands")
DIRECTIVE(define DISCORD_PERM_USE_APPLICATION_COMMANDS 1 << 31)
DESC("Allows for requesting to speak in stage channels")
DIRECTIVE(define DISCORD_PERM_REQUEST_TO_SPEAK 1 << 32)
DESC("Allows for creating, editing, and deleting scheduled events")
DIRECTIVE(define DISCORD_PERM_MANAGE_EVENTS 1 << 33)
DESC("Allows for deleting and archiving threads, and viewing all private"
     "threads")
DIRECTIVE(define DISCORD_PERM_MANAGE_THREADS 1 << 34)
DESC("Allows for creating public and announcement threads")
DIRECTIVE(define DISCORD_PERM_CREATE_PUBLIC_THREADS 1 << 35)
DESC("Allows for creating private threads")
DIRECTIVE(define DISCORD_PERM_CREATE_PRIVATE_THREADS 1 << 36)
DESC("Allows the usage of custom stickers from other servers")
DIRECTIVE(define DISCORD_PERM_USE_EXTERNAL_STICKERS 1 << 37)
DESC("Allows for sending messages in threads")
DIRECTIVE(define DISCORD_PERM_SEND_MESSAGES_IN_THREADS 1 << 38)
DESC("Allows for launching activities (applications with the `EMBEDDED` flag)"
     "in a voice channel)")
DIRECTIVE(define DISCORD_PERM_START_EMBEDDED_ACTIVITIES 1 << 39)
DESC("Allows for timing out users to prevent them from sending or reacting to"
     "messages in chat and threads, and from speaking in voice and stage"
     "channels")
DIRECTIVE(define DISCORD_PERM_MODERATE_MEMBERS 1 << 40)

PUB_STRUCT(discord_role)
  DESC("role id")
    FIELD_PRINTF(id, u64snowflake, PRIu64, SCNu64)
  DESC("role name")
    FIELD_PTR(name, char, *)
  DESC("integer representationof hexadecimal color code")
    FIELD(color, int, 0)
  DESC("if this role is pinned in the user listing")
    FIELD(hoist, bool, false)
  DESC("role icon hash")
  COND_WRITE(this->icon != NULL)
    FIELD_PTR(icon, char, *)
  COND_END
  DESC("role unicode emoji")
  COND_WRITE(this->unicode_emoji != NULL)
    FIELD_PTR(unicode_emoji, char, *)
  COND_END
  DESC("position of this role")
    FIELD(position, int, 0)
  DESC("permission bit set")
    FIELD_PTR(permissions, char, *)
  DESC("whether this role is managed by an integration")
    FIELD(managed, bool, false)
  DESC("whether this roleis mentionable")
    FIELD(mentionable, bool, false)
  DESC("the tags this role has")
  COND_WRITE(this->tags != NULL)
    FIELD_STRUCT_PTR(tags, discord_role_tag, *)
  COND_END
STRUCT_END

PUB_LIST(discord_roles)
    LISTTYPE_STRUCT(discord_role)
LIST_END

STRUCT(discord_role_tag)
  DESC("the id of the bot this role belongs to")
  COND_WRITE(this->bot_id != 0)
    FIELD_PRINTF(bot_id, u64snowflake, PRIu64, SCNu64)
  COND_END
  DESC("the id of the integration this role belongs to")
  COND_WRITE(this->integration_id != 0)
    FIELD_PRINTF(integration_id, u64snowflake, PRIu64, SCNu64)
  COND_END
  DESC("whether this is the guild's premium subscribe role")
    FIELD(premium_subscribe, bool, false)
STRUCT_END
